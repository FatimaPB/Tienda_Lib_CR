<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<div class="p-d-flex p-ai-center p-jc-center" style=" width: 100%; padding: 20px; margin-bottom: 500px;">
  <div class="card" style="width: 90%; margin: auto; padding: 20px;">
    <h2 class="texto" style="margin-bottom: 20px;">Productos del Catálogo</h2>

    <p-table 
      [value]="productos" 
      [tableStyle]="{ 'min-width': '50rem' }" 
      [paginator]="true" 
      [rows]="5" 
      [rowsPerPageOptions]="[5, 10, 20]" 
      class="p-shadow-2">
      
      <ng-template pTemplate="header">
        <tr>
          <th>Imagen</th>
          <th>Nombre</th>
          <th>Descripción</th>
          <th>Precio</th>
          <th>Acciones</th>
        </tr>
      </ng-template>
      
      <ng-template pTemplate="body" let-producto>
        <tr>
          <td>
            <p-carousel 
              [value]="producto.imagenes" 
              [numVisible]="1" 
              [numScroll]="1" 
              [circular]="false" 
              [autoplayInterval]="4000" 
              [showNavigators]="false" 
              [showIndicators]="true" 
              [style]="{ width: '200px' }">
              
              <ng-template pTemplate="item" let-image>
                <img [src]="image" 
                     alt="Imagen del producto" 
                     [style]="{ width: '100px', height: '100px', objectFit: 'cover', borderRadius: '5px' }">
              </ng-template>
          
            </p-carousel>
          </td>
          <td>{{ producto.nombre }}</td>
          <td>{{ producto.descripcion }}</td>
          <td>{{ producto.precio_calculado | currency }}</td>
          <td>
            <button pButton icon="pi pi-trash" label="Eliminar" 
                    class="p-button-text p-button-danger" 
                    (click)="confirmarEliminarProducto(producto.id)">
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
